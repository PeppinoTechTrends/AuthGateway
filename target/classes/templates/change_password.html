<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/assets/css/style-mobile-sign-up.css" media="screen and (max-width: 750px)">
    <link rel="stylesheet" href="/static/assets/css/style-sign-up.css" media="screen and (min-width: 751px)">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

</head>
<link rel="icon" type="image/png" href="/static/assets/img/mcdonalds-favicon.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">

<title>MCDonald's - Cambio Password</title>

<body>

    <div class="All-Content">

        <div class="header-side-login-content">
            <img src="/static/assets/img/header-maionese.png" alt="Header Image">
        </div>

        <div class="left-side-login-content">
            <a href="index.html" id="mc_logo_link" target="_blank"><img id="mc_logo_img"
                                                                        src="/static/assets/img/mc-donalds-logo..png" alt=""></a>
            <a href="https://www.mcdonalds.it/prodotti/menu" id="menu_link" target="_blank"><img id="menu_img"
                                                                                                 src="/static/assets/img/menu.png" alt=""></a>
            <img id="icecream_img" src="/static/assets/img/icecream.png" alt="">
            <img id="cola_img" src="/static/assets/img/cola.png" alt="">
            <h1 class="principal-text"
                style="padding-left: 3px; position: relative; bottom: 4vw;">Benvenuto nel mondo del sapore autentico. <br>
                Preparati a vivere un'esperienza unica e gustosa!</h1>
            <h2 class="link-text" style="position: relative; bottom: 4%;"><a
                    href="https://www.mcdonalds.it/prodotti/menu" target="_blank">Consulta i nostri ricchi menu'</a>
            </h2>
        </div>

        <div class="right-side-login-content">
            <img id="happy_meal" src="/static/assets/img/happy_.png" alt="">
            <h1 id="accesso_utente" class="principal-text">Aggiorna Passw</h1>

            <div class="login-content">
                <form>
                    <label style="position: relative; top: 3vw;" for="new_password"><b>Nuova Password</b></label><br>
                <span class="password-input">
                    <input id="new_password" style="position: relative; top: 3vw;" type="password" placeholder="Inserisci la nuova password"
                        name="new_password" maxlength="15" minlength="6" required>
                    <span class="password-toggle" id="togglePassword1"></span>
                    <i id="hamburger_pass1" title="Mostra la chiave di accesso!"
                        class="fa-solid fa-burger"
                        onmousedown="togglePasswordVisibility(true)"
                        onmouseup="togglePasswordVisibility(false)"
                        onmouseleave="togglePasswordVisibility(false)" style="position: relative; top: 3vw; right: 2vw;";></i>
                </span>
                <br>

                <label style="position: relative; top: 3vw;" for="confirm_password"><b>Conferma Nuova Password</b></label><br>
                <span class="password-input">
                    <input id="confirm_password" style="position: relative; top: 3vw;" type="password" placeholder="Conferma la nuova password" name="confirm_password" maxlength="15" minlength="6"><br>
                    <button style="position: relative; top: 2vw;" type="button" onclick="validatePasswords();">Invia</button>
                </form>
            </div>
        </div>

        <div class="footer-side-login-content">
            <img src="/static/assets/img/header-ketchup.png" alt="Header Image">
        </div>
    </div>


    <script>
        function sendForm() {
            // Utilizza SweetAlert2 per mostrare un avviso personalizzato
            Swal.fire({
                title: 'Fatto!!',
                text: 'La tua password è stata cambiata con successo. Verrai ora reindirizzato al portale principale.',
                icon: 'success', // Cambia l'icona a seconda delle tue esigenze
                confirmButtonText: 'OK',
                allowOutsideClick: false // L'utente non può chiudere l'avviso cliccando al di fuori di esso
            }).then((result) => {
                // Dopo che l'utente ha cliccato su "OK", reindirizza alla pagina principale solo se ha premuto "OK"
                if (result.isConfirmed) {
                    window.location.href = "sign_in.html";
                }
            });
        }

        function retryForm() {
            Swal.fire({
                    title: 'Errore!',
                    text: 'Errore!\nLe password non coincidono. Riprova.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
        }
            
        function togglePasswordVisibility(clicked) {
            const passwordInput = document.getElementById("new_password");
            const confirmPasswordInput = document.getElementById("confirm_password");
            const hamburgerIcon = document.getElementById("hamburger_pass1");

            if (clicked) {
                passwordInput.type = "text";
                confirmPasswordInput.type = "text";
                hamburgerIcon.style.opacity = 0.5;
            } else {
                passwordInput.type = "password";
                confirmPasswordInput.type = "password";
                hamburgerIcon.style.opacity = 1;
            }
        }

        function validatePasswords() {
            const newPassword = document.getElementById("new_password").value;
            const confirmPassword = document.getElementById("confirm_password").value;

            if (newPassword === confirmPassword) {
                // Le password coincidono, invia il form
                sendForm();
            } else {
                retryForm();
                // Le password non coincidono, mostra un alert di errore
            }
        }

    </script>


</body>

</html>
